---
import Layout from '../../layouts/layout.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';
import { getCollection } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
---

<Layout
  title="Huvik - Blog"
  description="My two cents about different topics going through my mind"
>
  <h1 class="text-2xl font-bold uppercase mb-4">Blog</h1>
  <p class="mb-8">My two cents about different topics going through my mind</p>
  {
    posts.map((post) => (
      <article class="w-full">
        <div class="flex justify-between items-center">
          <h2 class="text-xl font-bold mb-2">
            <a href={`/blog/${post.id}`}>{post.data.title}</a>
          </h2>
          <p class="text-gray-500 text-sm">
            <FormattedDate date={post.data.date} />
          </p>
        </div>
        <p class="text-gray-700 mb-4">{post.data.description}</p>
      </article>
    ))
  }
</Layout>
